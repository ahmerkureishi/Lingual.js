// Lingual.js v1.2.0
(function(a,b,c){"use strict";var d="Lingual",e="undefined"!=typeof module&&module.exports,f=f||function(d,f){var g,h,i,j,k=this;k.defaults={lang:"en",pathDelimiter:".",selectorKey:"translate",fixFloats:!0,debug:!0},g={strings:{}},h={log:function(a){k.defaults.debug&&console.log(a)},client:function(b){return c&&a?b.call():void 0},parsePath:function(a,b){if(!b)return!1;var c,d=b.split(k.defaults.pathDelimiter);for(c=0;c<d.length;c++){var e=d[c];if("undefined"==typeof a[e])return!1;a=a[e]}return a},initLanguage:function(a){h.setLang(a||k.defaults.lang)},setLang:function(a){h.client(function(){g.html.attr("lang",a)}),k.defaults.lang=a},setLocales:function(a){g.strings=a},injectVars:function(a,b){b=b||{};var c;for(c in b)b.hasOwnProperty(c)&&(a=a.replace(":"+c,b[c]));return a}},i={translate:function(b){var d=k.defaults.selectorKey,e="data-"+d,f=c("["+e+"]",b);f.each(function(){var a=c(this),b=a.attr(e);if(b){var d=b.split(":"),f=d.length>1?d[0]:!1,i=f?d[1]:d[0];if(!i||f==e)return;i=i.trim();var j=h.parsePath(g.strings[k.defaults.lang],i);if(j){var l=a.attr("data-vars");if(l)try{l=JSON.parse(l),j=h.injectVars(j,l)}catch(m){k.defaults.debug&&h.log("Invalid JSON: "+l)}f===!1||"html"==f?a.html(j):"text"==f?a.text(j):a.attr(f,j),k.defaults.fixFloats&&(a.css("display",a.css("display")),setTimeout(function(){a.css("display","")},1))}}}),(b||c(a)).trigger("translated")}},j={client:function(a,d){return k.defaults=c.extend(k.defaults,d),g.html=c("html"),h.initLanguage(k.defaults.lang||g.html.attr("lang")||b.language.split("-")[0]),"string"==typeof a?void c.getJSON(a.replace("%LANG%",k.defaults.lang),function(a){j.finish(a)}):void j.finish(a)},server:function(a,b){var c=require("node.extend");k.defaults=c(k.defaults,b),h.initLanguage(),j.finish(a)},finish:function(a){if("undefined"==typeof a[k.defaults.lang]){var b={};b[k.defaults.lang]=a,a=b}h.setLocales(a),h.client(function(){i.translate()})}},k.locale=function(a){return"undefined"==typeof a?k.defaults.lang:void("undefined"!=typeof g.strings[a]&&(k.defaults.lang=a))},k.translate=function(a){h.client(function(){i.translate(a)})},k.gettext=function(a,b){return h.injectVars(h.parsePath(g.strings[k.defaults.lang],a),b)},e?j.server(d,f):j.client(d,f)};e?module.exports=f:this[d]=f}).apply(this,"undefined"!=typeof document?[document,navigator,jQuery]:[]);